<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Checkable.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Javaslang</a> &gt; <a href="index.source.html" class="el_package">javaslang.test</a> &gt; <span class="el_source">Checkable.java</span></div><h1>Checkable.java</h1><pre class="source lang-java linenums">/*     / \____  _    ______   _____ / \____   ____  _____
 *    /  \__  \/ \  / \__  \ /  __//  \__  \ /    \/ __  \   Javaslang
 *  _/  // _\  \  \/  / _\  \\_  \/  // _\  \  /\  \__/  /   Copyright 2014-2015 Daniel Dietrich
 * /___/ \_____/\____/\_____/____/\___\_____/_/  \_/____/    Licensed under the Apache License, Version 2.0
 */
package javaslang.test;

import java.util.Random;
import java.util.concurrent.ThreadLocalRandom;
import java.util.function.Supplier;

/**
 * Interface for checkable properties, allowing composition via {@linkplain #and(Checkable)} and {@linkplain #or(Checkable)}.
 *
 * @author Daniel Dietrich
 * @since 1.2.0
 */
@FunctionalInterface
public interface Checkable {

    /**
     * A thread-safe, equally distributed random number generator.
     */
<span class="fc" id="L24">    Supplier&lt;Random&gt; RNG = ThreadLocalRandom::current;</span>

    /**
     * Default size hint for generators: 100
     */
    int DEFAULT_SIZE = 100;

    /**
     * Default tries to check a property: 1000
     */
    int DEFAULT_TRIES = 1000;

    /**
     * Checks this property.
     *
     * @param randomNumberGenerator An implementation of {@link java.util.Random}.
     * @param size                  A (not necessarily positive) size hint.
     * @param tries                 A non-negative number of tries to falsify the given property.
     * @return A {@linkplain CheckResult}
     */
    CheckResult check(Random randomNumberGenerator, int size, int tries);

    /**
     * Checks this property using the default random number generator {@link #RNG}.
     *
     * @param size  A (not necessarily positive) size hint.
     * @param tries A non-negative number of tries to falsify the given property.
     * @return A {@linkplain CheckResult}
     */
    default CheckResult check(int size, int tries) {
<span class="fc bfc" id="L54" title="All 2 branches covered.">        if (tries &lt; 0) {</span>
<span class="fc" id="L55">            throw new IllegalArgumentException(&quot;tries &lt; 0&quot;);</span>
        }
<span class="fc" id="L57">        return check(RNG.get(), size, tries);</span>
    }

    /**
     * Checks this property using the default random number generator {@link #RNG} by calling {@link #check(int, int)},
     * where size is {@link #DEFAULT_SIZE} and tries is {@link #DEFAULT_TRIES}.
     *
     * @return A {@linkplain CheckResult}
     */
    default CheckResult check() {
<span class="fc" id="L67">        return check(RNG.get(), DEFAULT_SIZE, DEFAULT_TRIES);</span>
    }

    /**
     * Returns a new Checkable which is satisfied if this Checkable &lt;em&gt;and&lt;/em&gt; the given checkable are satisfied.
     * &lt;p&gt;
     * First this Checkable is checked.
     *
     * @param checkable A Checkable
     * @return A new Checkable
     */
    default Checkable and(Checkable checkable) {
<span class="fc" id="L79">        return (rng, size, tries) -&gt; {</span>
<span class="fc" id="L80">            final CheckResult result = check(rng, size, tries);</span>
<span class="fc bfc" id="L81" title="All 2 branches covered.">            if (result.isSatisfied()) {</span>
<span class="fc" id="L82">                return checkable.check(rng, size, tries);</span>
            } else {
<span class="fc" id="L84">                return result;</span>
            }
        };
    }

    /**
     * Returns a new Checkable which is satisfied if this Checkable &lt;em&gt;or&lt;/em&gt; the given checkable are satisfied.
     * &lt;p&gt;
     * First this Checkable is checked.
     *
     * @param checkable A Checkable
     * @return A new Checkable
     */
    default Checkable or(Checkable checkable) {
<span class="fc" id="L98">        return (rng, size, tries) -&gt; {</span>
<span class="fc" id="L99">            final CheckResult result = check(rng, size, tries);</span>
<span class="fc bfc" id="L100" title="All 2 branches covered.">            if (result.isSatisfied()) {</span>
<span class="fc" id="L101">                return result;</span>
            } else {
<span class="fc" id="L103">                return checkable.check(rng, size, tries);</span>
            }
        };
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span></div></body></html>